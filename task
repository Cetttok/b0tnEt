чтобы понять суть этого класса посмотри класс транспорта и протестируй его погоняй.
Примерно в таком виде ты и должен написать
upnp был неплох в целом да. Но по сути ты просто взял мои исходники и разбил их на на несколько функций.
но похер. это работает.

примерные методы


public:
    конструктор(TcpServer * _server); верочтно из самого последннего класса будет. НУ сервер же один будет. Если tcp если udp то создашь в конструкторе
    void shareList(Host * hosts, int size); импользуй host из saver (может)
    void updateList(Host * hosts, newList);
    void check(); пропинговать и оставить только рабьочие
    void saveOnDrive();
private: я так думаю может меняться во время реализации
    loadFromDrive(Hosts * hosts, int size); вызывай метод в конструкторе
    bool isInList(Host & host);
    void append(Host & host); добавить в массив если что выбросить первые елементы
    bool checkHost(Host  & host); пропинговать
    Host * _list; в конструкторе :_list(new Host[MAX_HOSTS_LIST_SIZE]) ну и удалить в деструкторе delete _list[];
    Saver _saver;
    Pinger _ping; или TcpServer * _server; или просто через tcp надо подумать ведь если пинг через udp то нужен еще udp сервер и еще открытый udp port. Кстати добавь возможность открывать udp порт. Там можно
вопросы?
и да я думаю проще будет если сделать пинг отдельным хотя нет просто надо будет в клавссе составителя сообщений добавить ответ на пинг. Но можно и через udp.
но в любом случае добавь в upnp класс udp. Там параметр в конечном запросе есть.
Еще вопрос стоит ли сюда добавлять пинг сервер. Да наверное стоит
вызови в отдельном потоке в конструкторе Piner::server  помоему. ДА ДЕЛАЙ ЧЕРЕЗ UDP И ТОГДА В КОНСТРУКТОРЕ ДОЛЖЕН ОТКРЫВАТЬСЯ udp порт. Значит надо наверное сделать
upnp одиночкой (пример saver).
Тоесть пинг - udp pinger. в реализацию этого класса входит поддержка пинг сервера.
Теперь вопросы?
